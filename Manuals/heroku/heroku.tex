%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% LaTeX book template                           %%
%% Author:  Amber Jain (http://amberj.devio.us/) %%
%% License: ISC license                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[a4paper,11pt,oneside]{book}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage[english,portuguese]{babel}

\graphicspath{{./images/}} % set an default images folder

% Book's title and subtitle
\title{
	\Huge \textbf{Heroku Manual} \\ 
	\huge \url{https://devcenter.heroku.com/articles/how-heroku-works}
	}
% Author
\author{
	\textsc{Bruno ruas}
	}

\begin{document}

\frontmatter

\maketitle

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Auto-generated table of contents, list of figures and list of tables %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\tableofcontents
%\listoffigures
%\listoftables

\mainmatter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{How Heroku Works}

\section{Definindo uma Aplicação}

Uma aplicação é a coleção de \textbf{código-fonte} escrita em Ruby, Node.js, Java, Python, Clojure, Scala e PHP, alguma \textbf{dependency description} que instrui a build system com as informações adicionais sobre as dependências necessárias para a build e run da aplicação e um \textbf{Procfile} que contém os comandos nomeados que serão usados na build.
\\~\\
O mecanismo de dependência varia de acordo com a linguagem:
\begin{itemize}
	\item Ruby $\rightarrow$ Gemfile
	\item Python $\rightarrow$ requirements.textbf
	\item Node.js $\rightarrow$ package.json
	\item Java $\rightarrow$ pom.xml
\end{itemize}

\section{Sabendo o que Executar}

Um \textbf{requirement} é informar a plataforma quais partes da aplicação são runnable.
\\~\\
O Heroku consegue perceber essas partes dos principais frameworks:
\begin{itemize}
	\item Ruby on Rails $\rightarrow$ rails server
	\item Django $\rightarrow$ <app>/manage.py runserver
	\item Node.js $\rightarrow$ main in package.json
\end{itemize}

Para algumas aplicações você deve explicitamente declarar o que deve ser executado. Isso é feito em um arquivo texto que vai junto do source code chamado de \textbf{Procfile}.
\\~\\
Cada linha do Procfile declara um \textbf{process type} que são os comandos nomeados que devem ser executados no processo de build da aplicação.
\\~\\
Um exemplo de Procfile:
\begin{verbatim}
	web: java -jar lib/foobar.jar $PORT
	queue: java -jar lib/queue-processos.jar	
\end{verbatim}

Esse exemplo declara dois process type. O primeiro chamado \verb|web| que será executado no caminho indicado e o process type \verb|queue|.
\\~\\
Vale a pena, quando for planejar a sua aplicação. Se preocupar com a arquitetura dela. Uma referência que pode ser usada para isso é \url{https://devcenter.heroku.com/articles/architecting-apps}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}
